"use strict";(self.webpackChunkcreate_puzzle=self.webpackChunkcreate_puzzle||[]).push([[433],{55830:function(O,v,u){u.r(v);var F=u(48305),a=u.n(F),f=u(75271),y=u(39508),o=u(40748),d=u(52676);function l(){var n=(0,f.useState)(),e=a()(n,2),r=e[0],i=e[1],h=function(){(0,y.createPuzzle)(o).then(function(E){console.log(E),i(E)})};return(0,f.useEffect)(function(){h()},[]),(0,d.jsxs)("div",{children:[r&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:["\u80CC\u666F\u56FE\uFF1A",(0,d.jsx)("img",{src:r.bgUrl,alt:""})]}),(0,d.jsxs)("div",{children:["\u62FC\u56FE\uFF1A",(0,d.jsx)("img",{src:r.puzzleUrl,alt:""})]}),(0,d.jsxs)("div",{children:["x \u8F74\u504F\u79FB\u503C\uFF1A",r.x]}),(0,d.jsxs)("div",{children:["y \u8F74\u504F\u79FB\u503C\uFF1A",r.y]})]}),(0,d.jsx)("br",{}),(0,d.jsx)("button",{onClick:h,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210"})]})}v.default=l},27089:function(O,v,u){u.r(v);var F=u(75271),a=u(40748),f=u(24640),y=u(52676);function o(){var d=(0,F.useRef)(null),l=(0,F.useRef)(null);function n(){var e=d.current.getContext("2d"),r=new Image;r.src=a,r.crossOrigin="Anonymous",r.onload=function(){e&&(d.current.width=r.width,d.current.height=r.height,e.drawImage(r,0,0),e.strokeStyle="rgba(255, 255, 255, 0.7)",(0,f.drawPuzzle)(e,{x:40,y:40}),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill())}}return(0,F.useEffect)(function(){n()},[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("canvas",{ref:d,width:"0",height:"0"}),(0,y.jsx)("img",{src:"",alt:"",ref:l})]})}v.default=o},7660:function(O,v,u){u.r(v);var F=u(48305),a=u.n(F),f=u(75271),y=u(24640),o=u(52676);function d(){var l=(0,f.useRef)(null),n=(0,f.useRef)(null),e=(0,f.useState)(60),r=a()(e,2),i=r[0],h=r[1],z=(0,f.useState)(0),E=a()(z,2),S=E[0],b=E[1],V=(0,f.useState)(),L=a()(V,2),R=L[0],_=L[1];function U(){if(n.current=l.current.getContext("2d"),n.current){var C=(120-i)/2;(0,y.drawPuzzle)(n.current,{x:C,y:C,w:i,h:i,margin:S,points:R})}}function I(){n.current&&(n.current.clearRect(0,0,120,120),U())}function g(C){var B=C.target.value,T=+B;T<30?h(30):T>120?h(120):h(Math.floor(T)||60)}function D(C){var B=C.target.value,T=+B;T<0?b(0):T>20?b(20):b(Math.floor(T)||0)}function N(C){var B=C.target.value;_(B?+B:void 0)}return(0,f.useEffect)(function(){U()},[]),(0,f.useEffect)(function(){I()},[i,S,R]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("canvas",{ref:l,width:"120",height:"120",style:{border:"1px solid red"}}),(0,o.jsxs)("div",{children:["\u62FC\u56FE\u5BBD\u9AD8\uFF1A",(0,o.jsx)("input",{type:"number",value:i,onInput:g,onChange:g})]}),(0,o.jsxs)("div",{children:["\u7559\u767D\uFF1A",(0,o.jsx)("input",{type:"number",value:S,onInput:D,onChange:D})]}),(0,o.jsxs)("div",{children:["\u968F\u673A\u62FC\u56FE\u70B9\uFF1A",(0,o.jsxs)("select",{onChange:N,value:R,children:[(0,o.jsx)("option",{value:"",children:"2/3/4"}),(0,o.jsx)("option",{value:2,children:"2"}),(0,o.jsx)("option",{value:3,children:"3"}),(0,o.jsx)("option",{value:4,children:"4"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:I,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210\u62FC\u56FE"})]})}v.default=d},98442:function(O,v,u){u.r(v);var F=u(75271),a=u(52676);function f(){var y=(0,F.useRef)(null),o=(0,F.useRef)(null);function d(){var l=y.current.getContext("2d"),n=o.current.getContext("2d"),e={x:40.5,y:40.5,w:40,h:40},r=7,i=Math.hypot(r,r);l&&(l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w/2-i/2,e.y),l.arc(e.x+e.w/2,e.y-i/2,r,.75*Math.PI,.25*Math.PI),l.moveTo(e.x+e.w/2+i/2,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h/2-i/2),l.arc(e.x+e.w+i/2,e.y+e.h/2,r,1.25*Math.PI,.75*Math.PI),l.moveTo(e.x+e.w,e.y+e.h/2+i/2),l.lineTo(e.x+e.w,e.y+e.h),l.lineTo(e.x+e.w/2+i/2,e.y+e.h),l.arc(e.x+e.w/2,e.y+e.h+i/2,r,1.75*Math.PI,1.25*Math.PI),l.moveTo(e.x+e.w/2-i/2,e.y+e.h),l.lineTo(e.x,e.y+e.h),l.lineTo(e.x,e.y+e.h/2+i/2),l.arc(e.x-i/2,e.y+e.h/2,r,.25*Math.PI,1.75*Math.PI),l.moveTo(e.x,e.y+e.h/2-i/2),l.lineTo(e.x,e.y),l.strokeStyle="red",l.stroke(),l.closePath()),n&&(n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(e.x+e.w/2-i/2,e.y),n.arc(e.x+e.w/2,e.y+i/2,r,1.25*Math.PI,1.75*Math.PI,!0),n.moveTo(e.x+e.w/2+i/2,e.y),n.lineTo(e.x+e.w,e.y),n.lineTo(e.x+e.w,e.y+e.h/2-i/2),n.arc(e.x+e.w-i/2,e.y+e.h/2,r,1.75*Math.PI,.25*Math.PI,!0),n.moveTo(e.x+e.w,e.y+e.h/2+i/2),n.lineTo(e.x+e.w,e.y+e.h),n.lineTo(e.x+e.w/2+i/2,e.y+e.h),n.arc(e.x+e.w/2,e.y+e.h-i/2,r,.25*Math.PI,.75*Math.PI,!0),n.moveTo(e.x+e.w/2-i/2,e.y+e.h),n.lineTo(e.x,e.y+e.h),n.lineTo(e.x,e.y+e.h/2+i/2),n.arc(e.x+i/2,e.y+e.h/2,r,.75*Math.PI,1.25*Math.PI,!0),n.moveTo(e.x,e.y+e.h/2-i/2),n.lineTo(e.x,e.y),n.strokeStyle="red",n.stroke(),n.closePath())}return(0,F.useEffect)(function(){d()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{ref:y,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}}),(0,a.jsx)("canvas",{ref:o,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}})]})}v.default=f},61026:function(O,v,u){u.r(v),u.d(v,{default:function(){return Ee}});var F=u(26068),a=u.n(F),f=u(67825),y=u.n(f),o=u(48305),d=u.n(o),l=u(75271),n=u(97758),e=u(37837),r=u(39005),i=u(59459),h=u(61734),z=u(41474),E=u(95387),S=u(86591),b=u(51993),V=u(61295),L=u(35897),R=u(36155),_=u(39508),U=u(53444),I=u(37462),g=u(93666),D=u(64172),N=u(43204),C=u(34206),B=u(6714),T=u(99455),xe=u(86356),Z={itemUpload:"GTnjD86ZhgwXhMrg6F2f",itemWrapperFlexNone:"OTMBFPCllDQhiEWui5Rk",configWrapper:"uMibJp4WVYxudqEz9Ju2",result:"zgja6z0TycTYtpGRRRmY"},J=u(40748),t=u(52676),Fe=["imgSourceType","imgSourceUrl","img","typeX","typeY","offsetX","offsetY","bgWidthType","bgHeightType","bgWidth","bgHeight","bgOffsetX","bgOffsetY","equalHeight","imageWidthType","imageHeightType","imageWidth","imageHeight","cacheImage"],A=function(c){return c[c.Upload=0]="Upload",c[c.Input=1]="Input",c}(A||{}),ye=[{label:"\u4E0A\u4F20\u56FE\u7247",value:A.Upload},{label:"\u8FDC\u7A0B\u5730\u5740",value:A.Input}],s=function(c){return c[c.Custom=0]="Custom",c[c.Default=1]="Default",c}(s||{}),Q=[{label:"\u968F\u673A",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],k=[{label:"\u56FE\u7247\u5BBD\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],q=[{label:"\u56FE\u7247\u9AD8\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],ee=[{label:"2/3/4",value:""},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],H=function(c){return c[c.Yes=0]="Yes",c[c.No=1]="No",c}(H||{}),pe=[{label:"\u662F",value:H.Yes},{label:"\u5426",value:H.No}],te=[{label:"dataURL",value:"dataURL"},{label:"blob",value:"blob"}],x={sm:12,xs:24},ue={typeX:s.Default,typeY:s.Default,offsetX:0,offsetY:0,width:60,height:60,margin:2,points:ee[0].value,borderWidth:2,borderColor:"rgba(255,255,255,0.7)",fillColor:"rgba(255,255,255,0.7)",equalHeight:H.Yes,bgWidthType:s.Default,bgHeightType:s.Default,bgOffsetX:0,bgOffsetY:0,format:te[1].value,quality:.8,imageWidthType:s.Default,imageHeightType:s.Default,cacheImage:!0};function je(){var c=n.ZP.useForm(),Ce=d()(c,1),p=Ce[0],be=n.ZP.useWatch(["typeX"],p),De=n.ZP.useWatch(["typeY"],p),Te=n.ZP.useWatch(["bgWidthType"],p),Ze=n.ZP.useWatch(["bgHeightType"],p),Pe=n.ZP.useWatch(["imageWidthType"],p),Be=n.ZP.useWatch(["imageHeightType"],p),ae=n.ZP.useWatch(["imgSourceType"],p),Ae=(0,l.useState)(),ne=d()(Ae,2),Y=ne[0],X=ne[1],We=(0,l.useState)(!1),le=d()(We,2),Ie=le[0],ie=le[1],Me=(0,l.useState)(null),re=d()(Me,2),se=re[0],oe=re[1],W=(0,l.useRef)(1),K=(0,l.useCallback)(function(){var P,j,m=p.getFieldsValue(),me=m.imgSourceType,he=m.imgSourceUrl,w=m.img,Oe=m.typeX,ze=m.typeY,Se=m.offsetX,Re=m.offsetY,Ue=m.bgWidthType,He=m.bgHeightType,Ye=m.bgWidth,Le=m.bgHeight,Ne=m.bgOffsetX,Xe=m.bgOffsetY,Ke=m.equalHeight,we=m.imageWidthType,Ve=m.imageHeightType,ce=m.imageWidth,ge=m.imageHeight,_e=m.cacheImage,$e=y()(m,Fe);if(me===A.Upload){if(!Array.isArray(w)||!w[0]){X(void 0),U.ZP.error("\u8BF7\u4E0A\u4F20\u56FE\u7247");return}}else if(!he){X(void 0),U.ZP.error("\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740");return}var $=W.current;ie(!0);var Ge=me===A.Upload?((P=w[0])===null||P===void 0?void 0:P.originFileObj)||((j=w[0])===null||j===void 0?void 0:j.url):he,Je=Oe===s.Default?void 0:Se,Qe=ze===s.Default?void 0:Re,ke=Ue===s.Default?void 0:Ye,qe=He===s.Default?void 0:Le,et=[Ne,Xe],fe=we===s.Default?void 0:ce,ve=Ve===s.Default?void 0:ge,G=_e,tt=Ke===H.Yes;G&&(!fe&&typeof ce=="number"||!ve&&typeof ge=="number")&&(G=!1),(0,_.createPuzzle)(Ge,a()({x:Je,y:Qe,bgWidth:ke,bgHeight:qe,bgOffset:et,imageWidth:fe,imageHeight:ve,equalHeight:tt,cacheImage:G},$e)).then(function(M){$===W.current&&(oe(null),X(M),console.log(M))}).catch(function(M){$===W.current&&(X(void 0),oe((M==null?void 0:M.message)||M))}).finally(function(){$===W.current&&ie(!1)})},[]),de=(0,l.useCallback)((0,V.Z)(K,300),[K]);return(0,t.jsx)("div",{children:(0,t.jsxs)(I.Z,{gutter:[24,24],children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsxs)(n.ZP,{form:p,submitter:!1,labelWidth:112,initialValues:a()({imgSourceType:A.Upload},ue),onValuesChange:function(){W.current+=1,de()},children:[(0,t.jsx)(e.Z,{label:"\u56FE\u7247\u6E90\u7C7B\u578B",name:"imgSourceType",options:ye,hideLabel:!0,optionType:"button",radioGroupProps:{buttonStyle:"solid"}}),(0,t.jsx)(r.Z,{type:"avatar",name:"img",title:"\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247",extra:(0,t.jsxs)("div",{children:["\u4E0A\u4F20\u540E\u518D\u70B9\u51FB\u56FE\u7247\u53EF\u4EE5\u91CD\u65B0\u4E0A\u4F20\uFF0C",(0,t.jsx)("a",{onClick:function(){var j,m=p.getFieldValue("img");(!(0,L.Z)(m)||((j=m[0])===null||j===void 0?void 0:j.url)!==J)&&(p.setFieldValue("img",[{uid:(0,R.Z)(),name:"sunflower.jpg",url:J}]),W.current+=1,de())},children:"\u70B9\u51FB\u4F7F\u7528\u793A\u4F8B\u56FE\u7247"}),"\u3002"]}),className:Z.itemUpload,maxSize:50*1024*1024,hidden:ae!==A.Upload}),(0,t.jsx)(i.Z,{label:"\u56FE\u7247\u5730\u5740",name:"imgSourceUrl",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",hideLabel:!0,disabledWhiteSpace:!0,allowClear:!0,textAreaProps:{size:"large",autoSize:{minRows:2,maxRows:6}},hidden:ae!==A.Input}),(0,t.jsxs)(D.Z,{title:"\u914D\u7F6E\u9879",size:"small",className:Z.configWrapper,extra:(0,t.jsx)(N.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){p.setFieldsValue(ue),W.current+=1,K()},children:"\u91CD\u7F6E"}),children:[(0,t.jsxs)(D.Z,{title:"\u62FC\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"x \u8F74\u504F\u79FB",name:"typeX",options:Q,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetX",precision:0,min:0,style:{margin:0},hidden:be!==s.Custom})}),(0,t.jsx)(e.Z,{label:"y \u8F74\u504F\u79FB",name:"typeY",options:Q,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetY",precision:0,min:0,style:{margin:0},hidden:De!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u5BBD\u5EA6",name:"width",precision:0,min:20})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u9AD8\u5EA6",name:"height",precision:0,min:20})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u7559\u767D",name:"margin",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(z.Z,{label:"\u968F\u673A\u62FC\u56FE\u70B9",name:"points",options:ee})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u63CF\u8FB9\u5BBD\u5EA6",name:"borderWidth",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(E.Z,{label:"\u63CF\u8FB9\u989C\u8272",name:"borderColor",normalize:function(j){return E.Z.transformColor(j,"rgb")}})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(E.Z,{label:"\u586B\u5145\u989C\u8272",name:"fillColor",normalize:function(j){return E.Z.transformColor(j,"rgb")}})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(e.Z,{label:"\u7B49\u9AD8",name:"equalHeight",optionType:"button",options:pe,tooltip:"\u7B49\u9AD8\u65F6 y \u8F74\u59CB\u7EC8\u4E3A 0"})}))]})]}),(0,t.jsxs)(D.Z,{title:"\u80CC\u666F\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"bgWidthType",options:k,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgWidth",precision:0,min:0,style:{margin:0},hidden:Te!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"bgHeightType",options:q,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgHeight",precision:0,min:0,style:{margin:0},hidden:Ze!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"x \u8F74\u504F\u79FB",name:"bgOffsetX",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"y \u8F74\u504F\u79FB",name:"bgOffsetY",precision:0})}))]})]}),(0,t.jsx)(D.Z,{title:"\u5BFC\u51FA\u56FE\u7247",size:"small",type:"inner",children:(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(z.Z,{label:"\u683C\u5F0F",name:"format",options:te})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u8D28\u91CF",name:"quality",precision:2,step:.01,max:1,min:0})}))]})}),(0,t.jsxs)(D.Z,{title:"\u4E0A\u4F20\u7684\u56FE\u7247",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"imageWidthType",options:k,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageWidth",precision:0,min:0,style:{margin:0},hidden:Pe!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"imageHeightType",options:q,className:Z.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageHeight",precision:0,min:0,style:{margin:0},hidden:Be!==s.Custom})}),(0,t.jsx)(S.Z,{label:"\u7F13\u5B58",name:"cacheImage",tooltip:"\u7F13\u5B58\u6700\u8FD1\u52A0\u8F7D\u6210\u529F\u7684\u56FE\u7247\u3002\u6CE8\u610F\u56FE\u7247\u5BBD\u9AD8\u4E5F\u4F1A\u4E00\u5E76\u7F13\u5B58\u3002"})]})]})]})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(C.Z,{children:(0,t.jsx)(D.Z,{title:"\u751F\u6210\u7ED3\u679C",size:"small",styles:{body:{maxHeight:"calc(100vh - 80px)",overflowY:"auto"}},className:Z.result,extra:(0,t.jsx)(N.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){W.current+=1,K()},children:"\u91CD\u65B0\u751F\u6210"}),children:Y?(0,t.jsx)(B.Z,{spinning:Ie,delay:300,children:(0,t.jsxs)(b.Z,{column:1,styles:{label:{width:98,justifyContent:"flex-end"}},children:[(0,t.jsx)(b.Z.Item,{label:"\u80CC\u666F\u56FE",tooltip:"\u80CC\u666F\u56FE\u5C55\u793A\u6BD4\u4F8B\u53EF\u80FD\u6709\u7F29\u653E\uFF0C\u4E0D\u5F71\u54CD\u56FE\u7247\u5B9E\u9645\u5927\u5C0F",children:(0,t.jsx)("div",{style:{overflow:"hidden"},children:(0,t.jsx)("img",{src:Y.bgUrl,alt:"\u80CC\u666F\u56FE"})})}),(0,t.jsx)(b.Z.Item,{label:"\u62FC\u56FE",children:(0,t.jsx)("img",{src:Y.puzzleUrl,alt:"\u62FC\u56FE"})}),(0,t.jsx)(b.Z.Item,{label:"x \u8F74\u504F\u79FB",children:Y.x}),(0,t.jsx)(b.Z.Item,{label:"y \u8F74\u504F\u79FB",children:Y.y})]})}):se?(0,t.jsx)(T.Z,{type:"error",message:"Error",description:JSON.stringify(se),showIcon:!0}):(0,t.jsx)(xe.Z,{description:"\u8BF7\u4E0A\u4F20\u56FE\u7247"})})})}))]})})}var Ee=je},40748:function(O,v,u){O.exports=u.p+"static/sunflower.2164946b.jpg"}}]);

"use strict";(self.webpackChunkcreate_puzzle=self.webpackChunkcreate_puzzle||[]).push([[433],{98561:function(O,v,u){u.r(v);var p=u(48305),a=u.n(p),f=u(75271),F=u(56439),o=u(40748),d=u(52676);function l(){var n=(0,f.useState)(),e=a()(n,2),r=e[0],i=e[1],h=function(){(0,F.createPuzzle)(o).then(function(T){console.log(T),i(T)})};return(0,f.useEffect)(function(){h()},[]),(0,d.jsxs)("div",{children:[r&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:["\u80CC\u666F\u56FE\uFF1A",(0,d.jsx)("img",{src:r.bgUrl,alt:""})]}),(0,d.jsxs)("div",{children:["\u62FC\u56FE\uFF1A",(0,d.jsx)("img",{src:r.puzzleUrl,alt:""})]}),(0,d.jsxs)("div",{children:["x \u8F74\u504F\u79FB\u503C\uFF1A",r.x]}),(0,d.jsxs)("div",{children:["y \u8F74\u504F\u79FB\u503C\uFF1A",r.y]})]}),(0,d.jsx)("br",{}),(0,d.jsx)("button",{onClick:h,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210"})]})}v.default=l},10759:function(O,v,u){u.r(v);var p=u(75271),a=u(40748),f=u(51121),F=u(52676);function o(){var d=(0,p.useRef)(null),l=(0,p.useRef)(null);function n(){var e=d.current.getContext("2d"),r=new Image;r.src=a,r.crossOrigin="Anonymous",r.onload=function(){e&&(d.current.width=r.width,d.current.height=r.height,e.drawImage(r,0,0),e.strokeStyle="rgba(255, 255, 255, 0.7)",(0,f.drawPuzzle)(e,{x:40,y:40}),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill())}}return(0,p.useEffect)(function(){n()},[]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)("canvas",{ref:d,width:"0",height:"0"}),(0,F.jsx)("img",{src:"",alt:"",ref:l})]})}v.default=o},2823:function(O,v,u){u.r(v);var p=u(48305),a=u.n(p),f=u(75271),F=u(51121),o=u(52676);function d(){var l=(0,f.useRef)(null),n=(0,f.useRef)(null),e=(0,f.useState)(60),r=a()(e,2),i=r[0],h=r[1],z=(0,f.useState)(0),T=a()(z,2),S=T[0],E=T[1],_=(0,f.useState)(),N=a()(_,2),R=N[0],$=N[1];function U(){if(n.current=l.current.getContext("2d"),n.current){var j=(120-i)/2;(0,F.drawPuzzle)(n.current,{x:j,y:j,w:i,h:i,margin:S,points:R})}}function I(){n.current&&(n.current.clearRect(0,0,120,120),U())}function g(j){var P=j.target.value,b=+P;b<30?h(30):b>120?h(120):h(Math.floor(b)||60)}function C(j){var P=j.target.value,b=+P;b<0?E(0):b>20?E(20):E(Math.floor(b)||0)}function X(j){var P=j.target.value;$(P?+P:void 0)}return(0,f.useEffect)(function(){U()},[]),(0,f.useEffect)(function(){I()},[i,S,R]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("canvas",{ref:l,width:"120",height:"120",style:{border:"1px solid red"}}),(0,o.jsxs)("div",{children:["\u62FC\u56FE\u5BBD\u9AD8\uFF1A",(0,o.jsx)("input",{type:"number",value:i,onInput:g,onChange:g})]}),(0,o.jsxs)("div",{children:["\u7559\u767D\uFF1A",(0,o.jsx)("input",{type:"number",value:S,onInput:C,onChange:C})]}),(0,o.jsxs)("div",{children:["\u968F\u673A\u62FC\u56FE\u70B9\uFF1A",(0,o.jsxs)("select",{onChange:X,value:R,children:[(0,o.jsx)("option",{value:"",children:"2/3/4"}),(0,o.jsx)("option",{value:2,children:"2"}),(0,o.jsx)("option",{value:3,children:"3"}),(0,o.jsx)("option",{value:4,children:"4"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:I,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210\u62FC\u56FE"})]})}v.default=d},93671:function(O,v,u){u.r(v);var p=u(75271),a=u(52676);function f(){var F=(0,p.useRef)(null),o=(0,p.useRef)(null);function d(){var l=F.current.getContext("2d"),n=o.current.getContext("2d"),e={x:40.5,y:40.5,w:40,h:40},r=7,i=Math.hypot(r,r);l&&(l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w/2-i/2,e.y),l.arc(e.x+e.w/2,e.y-i/2,r,.75*Math.PI,.25*Math.PI),l.moveTo(e.x+e.w/2+i/2,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h/2-i/2),l.arc(e.x+e.w+i/2,e.y+e.h/2,r,1.25*Math.PI,.75*Math.PI),l.moveTo(e.x+e.w,e.y+e.h/2+i/2),l.lineTo(e.x+e.w,e.y+e.h),l.lineTo(e.x+e.w/2+i/2,e.y+e.h),l.arc(e.x+e.w/2,e.y+e.h+i/2,r,1.75*Math.PI,1.25*Math.PI),l.moveTo(e.x+e.w/2-i/2,e.y+e.h),l.lineTo(e.x,e.y+e.h),l.lineTo(e.x,e.y+e.h/2+i/2),l.arc(e.x-i/2,e.y+e.h/2,r,.25*Math.PI,1.75*Math.PI),l.moveTo(e.x,e.y+e.h/2-i/2),l.lineTo(e.x,e.y),l.strokeStyle="red",l.stroke(),l.closePath()),n&&(n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(e.x+e.w/2-i/2,e.y),n.arc(e.x+e.w/2,e.y+i/2,r,1.25*Math.PI,1.75*Math.PI,!0),n.moveTo(e.x+e.w/2+i/2,e.y),n.lineTo(e.x+e.w,e.y),n.lineTo(e.x+e.w,e.y+e.h/2-i/2),n.arc(e.x+e.w-i/2,e.y+e.h/2,r,1.75*Math.PI,.25*Math.PI,!0),n.moveTo(e.x+e.w,e.y+e.h/2+i/2),n.lineTo(e.x+e.w,e.y+e.h),n.lineTo(e.x+e.w/2+i/2,e.y+e.h),n.arc(e.x+e.w/2,e.y+e.h-i/2,r,.25*Math.PI,.75*Math.PI,!0),n.moveTo(e.x+e.w/2-i/2,e.y+e.h),n.lineTo(e.x,e.y+e.h),n.lineTo(e.x,e.y+e.h/2+i/2),n.arc(e.x+i/2,e.y+e.h/2,r,.75*Math.PI,1.25*Math.PI,!0),n.moveTo(e.x,e.y+e.h/2-i/2),n.lineTo(e.x,e.y),n.strokeStyle="red",n.stroke(),n.closePath())}return(0,p.useEffect)(function(){d()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{ref:F,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}}),(0,a.jsx)("canvas",{ref:o,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}})]})}v.default=f},12265:function(O,v,u){u.r(v),u.d(v,{default:function(){return Ce}});var p=u(26068),a=u.n(p),f=u(67825),F=u.n(f),o=u(48305),d=u.n(o),l=u(75271),n=u(31547),e=u(86507),r=u(14058),i=u(37973),h=u(76416),z=u(19442),T=u(50958),S=u(76557),E=u(52337),_=u(11808),N=u(86777),R=u(41872),$=u(56439),U=u(35509),I=u(67590),g=u(52431),C=u(31143),X=u(94228),j=u(62415),P=u(34008),b=u(80258),pe=u(23818),D={itemUpload:"GTnjD86ZhgwXhMrg6F2f",itemWrapperFlexNone:"OTMBFPCllDQhiEWui5Rk",configWrapper:"uMibJp4WVYxudqEz9Ju2",result:"zgja6z0TycTYtpGRRRmY"},Q=u(40748),t=u(52676),Fe=["imgSourceType","imgSourceUrl","img","typeX","typeY","offsetX","offsetY","bgWidthType","bgHeightType","bgWidth","bgHeight","bgOffsetX","bgOffsetY","equalHeight","imageWidthType","imageHeightType","imageWidth","imageHeight","cacheImage"],Z=function(c){return c[c.Upload=0]="Upload",c[c.Input=1]="Input",c}(Z||{}),ye=[{label:"\u4E0A\u4F20\u56FE\u7247",value:Z.Upload},{label:"\u8FDC\u7A0B\u5730\u5740",value:Z.Input}],s=function(c){return c[c.Custom=0]="Custom",c[c.Default=1]="Default",c}(s||{}),k=[{label:"\u968F\u673A",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],q=[{label:"\u56FE\u7247\u5BBD\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],ee=[{label:"\u56FE\u7247\u9AD8\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],te=[{label:"2/3/4",value:""},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],H=function(c){return c[c.Yes=0]="Yes",c[c.No=1]="No",c}(H||{}),je=[{label:"\u662F",value:H.Yes},{label:"\u5426",value:H.No}],ue=[{label:"dataURL",value:"dataURL"},{label:"blob",value:"blob"}],x={sm:12,xs:24},ae={typeX:s.Default,typeY:s.Default,offsetX:0,offsetY:0,width:60,height:60,margin:2,points:te[0].value,borderWidth:2,borderColor:"rgba(255,255,255,0.7)",fillColor:"rgba(255,255,255,0.7)",equalHeight:H.Yes,bgWidthType:s.Default,bgHeightType:s.Default,bgOffsetX:0,bgOffsetY:0,format:ue[1].value,quality:.8,imageWidthType:s.Default,imageHeightType:s.Default,cacheImage:!0};function Ee(){var c=n.ZP.useForm(),be=d()(c,1),y=be[0],De=n.ZP.useWatch(["typeX"],y),Te=n.ZP.useWatch(["typeY"],y),Pe=n.ZP.useWatch(["bgWidthType"],y),Ze=n.ZP.useWatch(["bgHeightType"],y),Be=n.ZP.useWatch(["imageWidthType"],y),Ae=n.ZP.useWatch(["imageHeightType"],y),ne=n.ZP.useWatch(["imgSourceType"],y),We=(0,l.useState)(),le=d()(We,2),Y=le[0],K=le[1],Ie=(0,l.useState)(!1),ie=d()(Ie,2),Me=ie[0],re=ie[1],Oe=(0,l.useState)(null),se=d()(Oe,2),oe=se[0],de=se[1],B=(0,l.useRef)(1),w=(0,l.useCallback)(function(L){var A,W,m=L||y.getFieldsValue(),me=m.imgSourceType,ce=m.imgSourceUrl,V=m.img,ze=m.typeX,Se=m.typeY,Re=m.offsetX,Ue=m.offsetY,He=m.bgWidthType,Ye=m.bgHeightType,Le=m.bgWidth,Ne=m.bgHeight,Xe=m.bgOffsetX,Ke=m.bgOffsetY,we=m.equalHeight,Ve=m.imageWidthType,_e=m.imageHeightType,ge=m.imageWidth,fe=m.imageHeight,$e=m.cacheImage,Ge=F()(m,Fe);if(me===Z.Upload){if(!Array.isArray(V)||!V[0]){K(void 0),U.ZP.error("\u8BF7\u4E0A\u4F20\u56FE\u7247");return}}else if(!ce){K(void 0),U.ZP.error("\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740");return}var G=B.current;re(!0);var Je=me===Z.Upload?((A=V[0])===null||A===void 0?void 0:A.originFileObj)||((W=V[0])===null||W===void 0?void 0:W.url):ce,Qe=ze===s.Default?void 0:Re,ke=Se===s.Default?void 0:Ue,qe=He===s.Default?void 0:Le,et=Ye===s.Default?void 0:Ne,tt=[Xe,Ke],ve=Ve===s.Default?void 0:ge,xe=_e===s.Default?void 0:fe,J=$e,ut=we===H.Yes;J&&(!ve&&typeof ge=="number"||!xe&&typeof fe=="number")&&(J=!1),(0,$.createPuzzle)(Je,a()({x:Qe,y:ke,bgWidth:qe,bgHeight:et,bgOffset:tt,imageWidth:ve,imageHeight:xe,equalHeight:ut,cacheImage:J},Ge)).then(function(M){G===B.current&&(de(null),K(M),console.log(M))}).catch(function(M){G===B.current&&(K(void 0),de((M==null?void 0:M.message)||M))}).finally(function(){G===B.current&&re(!1)})},[]),he=(0,l.useCallback)((0,_.Z)(w,300),[w]);return(0,t.jsx)("div",{children:(0,t.jsxs)(I.Z,{gutter:[24,24],children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsxs)(n.ZP,{form:y,submitter:!1,labelWidth:112,initialValues:a()({imgSourceType:Z.Upload},ae),onValuesChange:function(A,W){B.current+=1,he(W)},children:[(0,t.jsx)(e.Z,{label:"\u56FE\u7247\u6E90\u7C7B\u578B",name:"imgSourceType",options:ye,hideLabel:!0,optionType:"button",radioGroupProps:{buttonStyle:"solid"}}),(0,t.jsx)(r.Z,{type:"avatar",name:"img",title:"\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247",extra:(0,t.jsxs)("div",{children:["\u4E0A\u4F20\u540E\u518D\u70B9\u51FB\u56FE\u7247\u53EF\u4EE5\u91CD\u65B0\u4E0A\u4F20\uFF0C",(0,t.jsx)("a",{onClick:function(){var A,W=y.getFieldValue("img");(!(0,N.Z)(W)||((A=W[0])===null||A===void 0?void 0:A.url)!==Q)&&(y.setFieldValue("img",[{uid:(0,R.Z)(),name:"sunflower.jpg",url:Q}]),B.current+=1,he())},children:"\u70B9\u51FB\u4F7F\u7528\u793A\u4F8B\u56FE\u7247"}),"\u3002"]}),className:D.itemUpload,maxSize:50*1024*1024,hidden:ne!==Z.Upload}),(0,t.jsx)(i.Z,{label:"\u56FE\u7247\u5730\u5740",name:"imgSourceUrl",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",hideLabel:!0,disabledWhiteSpace:!0,allowClear:!0,inputProps:{size:"large",autoSize:{minRows:2,maxRows:6}},hidden:ne!==Z.Input}),(0,t.jsxs)(C.Z,{title:"\u914D\u7F6E\u9879",size:"small",className:D.configWrapper,extra:(0,t.jsx)(X.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){y.setFieldsValue(ae),B.current+=1,w()},children:"\u91CD\u7F6E"}),children:[(0,t.jsxs)(C.Z,{title:"\u62FC\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"x \u8F74\u504F\u79FB",name:"typeX",options:k,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetX",precision:0,inputProps:{min:0},style:{margin:0},hidden:De!==s.Custom})}),(0,t.jsx)(e.Z,{label:"y \u8F74\u504F\u79FB",name:"typeY",options:k,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetY",precision:0,inputProps:{min:0},style:{margin:0},hidden:Te!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u5BBD\u5EA6",name:"width",precision:0,inputProps:{min:20}})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u9AD8\u5EA6",name:"height",precision:0,inputProps:{min:20}})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u7559\u767D",name:"margin",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(z.Z,{label:"\u968F\u673A\u62FC\u56FE\u70B9",name:"points",options:te})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u63CF\u8FB9\u5BBD\u5EA6",name:"borderWidth",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(T.Z,{label:"\u63CF\u8FB9\u989C\u8272",name:"borderColor",colorMode:"rgb"})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(T.Z,{label:"\u586B\u5145\u989C\u8272",name:"fillColor",colorMode:"rgb"})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(e.Z,{label:"\u7B49\u9AD8",name:"equalHeight",optionType:"button",options:je,tooltip:"\u7B49\u9AD8\u65F6 y \u8F74\u59CB\u7EC8\u4E3A 0"})}))]})]}),(0,t.jsxs)(C.Z,{title:"\u80CC\u666F\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"bgWidthType",options:q,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgWidth",precision:0,inputProps:{min:0},style:{margin:0},hidden:Pe!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"bgHeightType",options:ee,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgHeight",precision:0,inputProps:{min:0},style:{margin:0},hidden:Ze!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"x \u8F74\u504F\u79FB",name:"bgOffsetX",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"y \u8F74\u504F\u79FB",name:"bgOffsetY",precision:0})}))]})]}),(0,t.jsx)(C.Z,{title:"\u5BFC\u51FA\u56FE\u7247",size:"small",type:"inner",children:(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(z.Z,{label:"\u683C\u5F0F",name:"format",options:ue})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(h.Z,{label:"\u8D28\u91CF",name:"quality",precision:2,step:.01,max:1,min:0})}))]})}),(0,t.jsxs)(C.Z,{title:"\u4E0A\u4F20\u7684\u56FE\u7247",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"imageWidthType",options:q,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageWidth",precision:0,inputProps:{min:0},style:{margin:0},hidden:Be!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"imageHeightType",options:ee,className:D.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageHeight",precision:0,inputProps:{min:0},style:{margin:0},hidden:Ae!==s.Custom})}),(0,t.jsx)(S.Z,{label:"\u7F13\u5B58",name:"cacheImage",tooltip:"\u7F13\u5B58\u6700\u8FD1\u52A0\u8F7D\u6210\u529F\u7684\u56FE\u7247\u3002\u6CE8\u610F\u56FE\u7247\u5BBD\u9AD8\u4E5F\u4F1A\u4E00\u5E76\u7F13\u5B58\u3002"})]})]})]})})),(0,t.jsx)(g.Z,a()(a()({},x),{},{children:(0,t.jsx)(j.Z,{children:(0,t.jsx)(C.Z,{title:"\u751F\u6210\u7ED3\u679C",size:"small",styles:{body:{maxHeight:"calc(100vh - 80px)",overflowY:"auto"}},className:D.result,extra:(0,t.jsx)(X.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){B.current+=1,w()},children:"\u91CD\u65B0\u751F\u6210"}),children:Y?(0,t.jsx)(P.Z,{spinning:Me,delay:300,children:(0,t.jsxs)(E.Z,{column:1,styles:{label:{width:98,justifyContent:"flex-end"}},children:[(0,t.jsx)(E.Z.Item,{label:"\u80CC\u666F\u56FE",tooltip:"\u80CC\u666F\u56FE\u5C55\u793A\u6BD4\u4F8B\u53EF\u80FD\u6709\u7F29\u653E\uFF0C\u4E0D\u5F71\u54CD\u56FE\u7247\u5B9E\u9645\u5927\u5C0F",children:(0,t.jsx)("div",{style:{overflow:"hidden"},children:(0,t.jsx)("img",{src:Y.bgUrl,alt:"\u80CC\u666F\u56FE"})})}),(0,t.jsx)(E.Z.Item,{label:"\u62FC\u56FE",children:(0,t.jsx)("img",{src:Y.puzzleUrl,alt:"\u62FC\u56FE"})}),(0,t.jsx)(E.Z.Item,{label:"x \u8F74\u504F\u79FB",children:Y.x}),(0,t.jsx)(E.Z.Item,{label:"y \u8F74\u504F\u79FB",children:Y.y})]})}):oe?(0,t.jsx)(b.Z,{type:"error",message:"Error",description:JSON.stringify(oe),showIcon:!0}):(0,t.jsx)(pe.Z,{description:"\u8BF7\u4E0A\u4F20\u56FE\u7247"})})})}))]})})}var Ce=Ee},40748:function(O,v,u){O.exports=u.p+"static/sunflower.2164946b.jpg"}}]);

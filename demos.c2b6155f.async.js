"use strict";(self.webpackChunkcreate_puzzle=self.webpackChunkcreate_puzzle||[]).push([[433],{92653:function(I,x,u){u.r(x);var p=u(48305),a=u.n(p),v=u(75271),y=u(99482),o=u(40748),d=u(52676);function l(){var n=(0,v.useState)(),e=a()(n,2),r=e[0],i=e[1],c=function(){(0,y.createPuzzle)(o).then(function(C){console.log(C),i(C)})};return(0,v.useEffect)(function(){c()},[]),(0,d.jsxs)("div",{children:[r&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:["\u80CC\u666F\u56FE\uFF1A",(0,d.jsx)("img",{src:r.bgUrl,alt:""})]}),(0,d.jsxs)("div",{children:["\u62FC\u56FE\uFF1A",(0,d.jsx)("img",{src:r.puzzleUrl,alt:""})]}),(0,d.jsxs)("div",{children:["x \u8F74\u504F\u79FB\u503C\uFF1A",r.x]}),(0,d.jsxs)("div",{children:["y \u8F74\u504F\u79FB\u503C\uFF1A",r.y]})]}),(0,d.jsx)("br",{}),(0,d.jsx)("button",{onClick:c,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210"})]})}x.default=l},9720:function(I,x,u){u.r(x);var p=u(75271),a=u(40748),v=u(2956),y=u(52676);function o(){var d=(0,p.useRef)(null),l=(0,p.useRef)(null);function n(){var e=d.current.getContext("2d"),r=new Image;r.src=a,r.crossOrigin="Anonymous",r.onload=function(){e&&(d.current.width=r.width,d.current.height=r.height,e.drawImage(r,0,0),e.strokeStyle="rgba(255, 255, 255, 0.7)",(0,v.drawPuzzle)(e,{x:40,y:40}),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill())}}return(0,p.useEffect)(function(){n()},[]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("canvas",{ref:d,width:"0",height:"0"}),(0,y.jsx)("img",{src:"",alt:"",ref:l})]})}x.default=o},28888:function(I,x,u){u.r(x);var p=u(48305),a=u.n(p),v=u(75271),y=u(2956),o=u(52676);function d(){var l=(0,v.useRef)(null),n=(0,v.useRef)(null),e=(0,v.useState)(60),r=a()(e,2),i=r[0],c=r[1],z=(0,v.useState)(0),C=a()(z,2),S=C[0],T=C[1],R=(0,v.useState)(),L=a()(R,2),M=L[0],O=L[1];function g(){if(n.current=l.current.getContext("2d"),n.current){var b=(120-i)/2;(0,y.drawPuzzle)(n.current,{x:b,y:b,w:i,h:i,margin:S,points:M})}}function P(){n.current&&(n.current.clearRect(0,0,120,120),g())}function U(b){var Z=b.target.value,f=+Z;f<30?c(30):f>120?c(120):c(Math.floor(f)||60)}function N(b){var Z=b.target.value,f=+Z;f<0?T(0):f>20?T(20):T(Math.floor(f)||0)}function w(b){var Z=b.target.value;O(Z?+Z:void 0)}return(0,v.useEffect)(function(){g()},[]),(0,v.useEffect)(function(){P()},[i,S,M]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("canvas",{ref:l,width:"120",height:"120",style:{border:"1px solid red"}}),(0,o.jsxs)("div",{children:["\u62FC\u56FE\u5BBD\u9AD8\uFF1A",(0,o.jsx)("input",{type:"number",value:i,onInput:U,onChange:U})]}),(0,o.jsxs)("div",{children:["\u7559\u767D\uFF1A",(0,o.jsx)("input",{type:"number",value:S,onInput:N,onChange:N})]}),(0,o.jsxs)("div",{children:["\u968F\u673A\u62FC\u56FE\u70B9\uFF1A",(0,o.jsxs)("select",{onChange:w,value:M,children:[(0,o.jsx)("option",{value:"",children:"2/3/4"}),(0,o.jsx)("option",{value:2,children:"2"}),(0,o.jsx)("option",{value:3,children:"3"}),(0,o.jsx)("option",{value:4,children:"4"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:P,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210\u62FC\u56FE"})]})}x.default=d},9101:function(I,x,u){u.r(x);var p=u(75271),a=u(52676);function v(){var y=(0,p.useRef)(null),o=(0,p.useRef)(null);function d(){var l=y.current.getContext("2d"),n=o.current.getContext("2d"),e={x:40.5,y:40.5,w:40,h:40},r=7,i=Math.hypot(r,r);l&&(l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w/2-i/2,e.y),l.arc(e.x+e.w/2,e.y-i/2,r,.75*Math.PI,.25*Math.PI),l.moveTo(e.x+e.w/2+i/2,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h/2-i/2),l.arc(e.x+e.w+i/2,e.y+e.h/2,r,1.25*Math.PI,.75*Math.PI),l.moveTo(e.x+e.w,e.y+e.h/2+i/2),l.lineTo(e.x+e.w,e.y+e.h),l.lineTo(e.x+e.w/2+i/2,e.y+e.h),l.arc(e.x+e.w/2,e.y+e.h+i/2,r,1.75*Math.PI,1.25*Math.PI),l.moveTo(e.x+e.w/2-i/2,e.y+e.h),l.lineTo(e.x,e.y+e.h),l.lineTo(e.x,e.y+e.h/2+i/2),l.arc(e.x-i/2,e.y+e.h/2,r,.25*Math.PI,1.75*Math.PI),l.moveTo(e.x,e.y+e.h/2-i/2),l.lineTo(e.x,e.y),l.strokeStyle="red",l.stroke(),l.closePath()),n&&(n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(e.x+e.w/2-i/2,e.y),n.arc(e.x+e.w/2,e.y+i/2,r,1.25*Math.PI,1.75*Math.PI,!0),n.moveTo(e.x+e.w/2+i/2,e.y),n.lineTo(e.x+e.w,e.y),n.lineTo(e.x+e.w,e.y+e.h/2-i/2),n.arc(e.x+e.w-i/2,e.y+e.h/2,r,1.75*Math.PI,.25*Math.PI,!0),n.moveTo(e.x+e.w,e.y+e.h/2+i/2),n.lineTo(e.x+e.w,e.y+e.h),n.lineTo(e.x+e.w/2+i/2,e.y+e.h),n.arc(e.x+e.w/2,e.y+e.h-i/2,r,.25*Math.PI,.75*Math.PI,!0),n.moveTo(e.x+e.w/2-i/2,e.y+e.h),n.lineTo(e.x,e.y+e.h),n.lineTo(e.x,e.y+e.h/2+i/2),n.arc(e.x+i/2,e.y+e.h/2,r,.75*Math.PI,1.25*Math.PI,!0),n.moveTo(e.x,e.y+e.h/2-i/2),n.lineTo(e.x,e.y),n.strokeStyle="red",n.stroke(),n.closePath())}return(0,p.useEffect)(function(){d()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{ref:y,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}}),(0,a.jsx)("canvas",{ref:o,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}})]})}x.default=v},23734:function(I,x,u){u.r(x),u.d(x,{default:function(){return je}});var p=u(26068),a=u.n(p),v=u(67825),y=u.n(v),o=u(48305),d=u.n(o),l=u(75271),n=u(32977),e=u(73615),r=u(60534),i=u(82675),c=u(12381),z=u(95466),C=u(40766),S=u(32230),T=u(21565),R=u(61313),L=u(99482),M=u(26633),O=u(94744),g=u(3754),P=u(1976),U=u(49638),N=u(3584),w=u(33035),b=u(27542),Z=u(32669),f={itemUpload:"GTnjD86ZhgwXhMrg6F2f",itemWrapperFlexNone:"OTMBFPCllDQhiEWui5Rk",configWrapper:"uMibJp4WVYxudqEz9Ju2",result:"zgja6z0TycTYtpGRRRmY"},J=u(40748),t=u(52676),ve=["imgSourceType","imgSourceUrl","img","typeX","typeY","offsetX","offsetY","bgWidthType","bgHeightType","bgWidth","bgHeight","bgOffsetX","bgOffsetY","equalHeight","imageWidthType","imageHeightType","imageWidth","imageHeight","cacheImage"],xe="https://picsum.photos/320/160",A=function(h){return h[h.Upload=0]="Upload",h[h.Input=1]="Input",h}(A||{}),Fe=[{label:"\u4E0A\u4F20\u56FE\u7247",value:A.Upload},{label:"\u8FDC\u7A0B\u5730\u5740",value:A.Input}],s=function(h){return h[h.Custom=0]="Custom",h[h.Default=1]="Default",h}(s||{}),Q=[{label:"\u968F\u673A",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],k=[{label:"\u56FE\u7247\u5BBD\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],q=[{label:"\u56FE\u7247\u9AD8\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],ee=[{label:"2/3/4",value:""},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],H=function(h){return h[h.Yes=0]="Yes",h[h.No=1]="No",h}(H||{}),pe=[{label:"\u662F",value:H.Yes},{label:"\u5426",value:H.No}],te=[{label:"dataURL",value:"dataURL"},{label:"blob",value:"blob"}],F={sm:12,xs:24},ue={typeX:s.Default,typeY:s.Default,offsetX:0,offsetY:0,width:60,height:60,margin:2,points:ee[0].value,borderWidth:2,borderColor:"rgba(255,255,255,0.7)",fillColor:"rgba(255,255,255,0.7)",equalHeight:H.Yes,bgWidthType:s.Default,bgHeightType:s.Default,bgOffsetX:0,bgOffsetY:0,format:te[1].value,quality:.8,imageWidthType:s.Default,imageHeightType:s.Default,cacheImage:!0};function ye(){var h=n.ZP.useForm(),Ee=d()(h,1),j=Ee[0],Ce=n.ZP.useWatch(["typeX"],j),be=n.ZP.useWatch(["typeY"],j),De=n.ZP.useWatch(["bgWidthType"],j),Te=n.ZP.useWatch(["bgHeightType"],j),Pe=n.ZP.useWatch(["imageWidthType"],j),Be=n.ZP.useWatch(["imageHeightType"],j),ae=n.ZP.useWatch(["imgSourceType"],j),Ze=(0,l.useState)(),ne=d()(Ze,2),Y=ne[0],_=ne[1],Ae=(0,l.useState)(!1),le=d()(Ae,2),We=le[0],ie=le[1],Ie=(0,l.useState)(null),re=d()(Ie,2),se=re[0],oe=re[1],B=(0,l.useRef)(1),X=(0,l.useCallback)(function(){var D,E,m=j.getFieldsValue(),de=m.imgSourceType,me=m.imgSourceUrl,K=m.img,Me=m.typeX,Oe=m.typeY,ze=m.offsetX,Se=m.offsetY,Re=m.bgWidthType,Ue=m.bgHeightType,He=m.bgWidth,Ye=m.bgHeight,Le=m.bgOffsetX,Ne=m.bgOffsetY,_e=m.equalHeight,Xe=m.imageWidthType,Ke=m.imageHeightType,ce=m.imageWidth,he=m.imageHeight,we=m.cacheImage,Ve=y()(m,ve);if(de===A.Upload){if(!Array.isArray(K)||!K[0]){_(void 0),M.ZP.error("\u8BF7\u4E0A\u4F20\u56FE\u7247");return}}else if(!me){_(void 0),M.ZP.error("\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740");return}var $=B.current;ie(!0);var $e=de===A.Upload?((D=K[0])===null||D===void 0?void 0:D.originFileObj)||((E=K[0])===null||E===void 0?void 0:E.url):me,Ge=Me===s.Default?void 0:ze,Je=Oe===s.Default?void 0:Se,Qe=Re===s.Default?void 0:He,ke=Ue===s.Default?void 0:Ye,qe=[Le,Ne],ge=Xe===s.Default?void 0:ce,fe=Ke===s.Default?void 0:he,G=we,et=_e===H.Yes;G&&(!ge&&typeof ce=="number"||!fe&&typeof he=="number")&&(G=!1),(0,L.createPuzzle)($e,a()({x:Ge,y:Je,bgWidth:Qe,bgHeight:ke,bgOffset:qe,imageWidth:ge,imageHeight:fe,equalHeight:et,cacheImage:G},Ve)).then(function(W){$===B.current&&(oe(null),_(W),console.log(W))}).catch(function(W){$===B.current&&(_(void 0),oe((W==null?void 0:W.message)||W))}).finally(function(){$===B.current&&ie(!1)})},[]),V=(0,l.useCallback)((0,R.debounce)(X,300),[X]);return(0,t.jsx)("div",{children:(0,t.jsxs)(O.Z,{gutter:[24,24],children:[(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsxs)(n.ZP,{form:j,submitter:!1,labelWidth:112,initialValues:a()({imgSourceType:A.Upload},ue),onValuesChange:function(){B.current+=1,V()},children:[(0,t.jsx)(e.Z,{label:"\u56FE\u7247\u6E90\u7C7B\u578B",name:"imgSourceType",options:Fe,hideLabel:!0,optionType:"button",radioGroupProps:{buttonStyle:"solid"}}),(0,t.jsx)(r.Z,{type:"avatar",name:"img",title:"\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247",extra:(0,t.jsxs)("div",{children:["\u4E0A\u4F20\u540E\u518D\u70B9\u51FB\u56FE\u7247\u53EF\u4EE5\u91CD\u65B0\u4E0A\u4F20\uFF0C",(0,t.jsx)("a",{onClick:function(){var E,m=j.getFieldValue("img");(!(0,R.isArray)(m)||((E=m[0])===null||E===void 0?void 0:E.url)!==J)&&(j.setFieldValue("img",[{uid:(0,R.uniqueId)(),name:"sunflower.jpg",url:J}]),B.current+=1,V())},children:"\u70B9\u51FB\u4F7F\u7528\u793A\u4F8B\u56FE\u7247"}),"\u3002"]}),className:f.itemUpload,maxSize:50*1024*1024,hidden:ae!==A.Upload}),(0,t.jsx)(i.Z,{label:"\u56FE\u7247\u5730\u5740",name:"imgSourceUrl",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",hideLabel:!0,disabledWhiteSpace:!0,allowClear:!0,textAreaProps:{size:"large",autoSize:{minRows:2,maxRows:6}},hidden:ae!==A.Input,extra:(0,t.jsx)("div",{children:(0,t.jsx)("a",{onClick:function(){j.setFieldValue("imgSourceUrl",xe+"?t="+Date.now()),B.current+=1,V()},children:"\u70B9\u51FB\u4F7F\u7528 Lorem Picsum"})})}),(0,t.jsxs)(P.Z,{title:"\u914D\u7F6E\u9879",size:"small",className:f.configWrapper,extra:(0,t.jsx)(U.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){j.setFieldsValue(ue),B.current+=1,X()},children:"\u91CD\u7F6E"}),children:[(0,t.jsxs)(P.Z,{title:"\u62FC\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"x \u8F74\u504F\u79FB",name:"typeX",options:Q,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"offsetX",precision:0,min:0,style:{margin:0},hidden:Ce!==s.Custom})}),(0,t.jsx)(e.Z,{label:"y \u8F74\u504F\u79FB",name:"typeY",options:Q,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"offsetY",precision:0,min:0,style:{margin:0},hidden:be!==s.Custom})}),(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"\u5BBD\u5EA6",name:"width",precision:0,min:20})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"\u9AD8\u5EA6",name:"height",precision:0,min:20})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"\u7559\u767D",name:"margin",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(z.Z,{label:"\u968F\u673A\u62FC\u56FE\u70B9",name:"points",options:ee})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"\u63CF\u8FB9\u5BBD\u5EA6",name:"borderWidth",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(C.Z,{label:"\u63CF\u8FB9\u989C\u8272",name:"borderColor",normalize:function(E){return C.Z.transformColor(E,"rgb")}})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(C.Z,{label:"\u586B\u5145\u989C\u8272",name:"fillColor",normalize:function(E){return C.Z.transformColor(E,"rgb")}})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(e.Z,{label:"\u7B49\u9AD8",name:"equalHeight",optionType:"button",options:pe,tooltip:"\u7B49\u9AD8\u65F6 y \u8F74\u59CB\u7EC8\u4E3A 0"})}))]})]}),(0,t.jsxs)(P.Z,{title:"\u80CC\u666F\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"bgWidthType",options:k,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"bgWidth",precision:0,min:0,style:{margin:0},hidden:De!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"bgHeightType",options:q,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"bgHeight",precision:0,min:0,style:{margin:0},hidden:Te!==s.Custom})}),(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"x \u8F74\u504F\u79FB",name:"bgOffsetX",precision:0})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"y \u8F74\u504F\u79FB",name:"bgOffsetY",precision:0})}))]})]}),(0,t.jsx)(P.Z,{title:"\u5BFC\u51FA\u56FE\u7247",size:"small",type:"inner",children:(0,t.jsxs)(O.Z,{children:[(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(z.Z,{label:"\u683C\u5F0F",name:"format",options:te})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(c.Z,{label:"\u8D28\u91CF",name:"quality",precision:2,step:.01,max:1,min:0})}))]})}),(0,t.jsxs)(P.Z,{title:"\u4E0A\u4F20\u7684\u56FE\u7247",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"imageWidthType",options:k,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"imageWidth",precision:0,min:0,style:{margin:0},hidden:Pe!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"imageHeightType",options:q,className:f.itemWrapperFlexNone,contentAfter:(0,t.jsx)(c.Z,{name:"imageHeight",precision:0,min:0,style:{margin:0},hidden:Be!==s.Custom})}),(0,t.jsx)(S.Z,{label:"\u7F13\u5B58",name:"cacheImage",tooltip:"\u7F13\u5B58\u6700\u8FD1\u52A0\u8F7D\u6210\u529F\u7684\u56FE\u7247\u3002\u6CE8\u610F\u56FE\u7247\u5BBD\u9AD8\u4E5F\u4F1A\u4E00\u5E76\u7F13\u5B58\u3002"})]})]})]})})),(0,t.jsx)(g.Z,a()(a()({},F),{},{children:(0,t.jsx)(N.Z,{children:(0,t.jsx)(P.Z,{title:"\u751F\u6210\u7ED3\u679C",size:"small",styles:{body:{maxHeight:"calc(100vh - 80px)",overflowY:"auto"}},className:f.result,extra:(0,t.jsx)(U.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){B.current+=1,X()},children:"\u91CD\u65B0\u751F\u6210"}),children:Y?(0,t.jsx)(w.Z,{spinning:We,delay:300,children:(0,t.jsxs)(T.Z,{column:1,styles:{label:{width:98,justifyContent:"flex-end"}},children:[(0,t.jsx)(T.Z.Item,{label:"\u80CC\u666F\u56FE",tooltip:"\u80CC\u666F\u56FE\u5C55\u793A\u6BD4\u4F8B\u53EF\u80FD\u6709\u7F29\u653E\uFF0C\u4E0D\u5F71\u54CD\u56FE\u7247\u5B9E\u9645\u5927\u5C0F",children:(0,t.jsx)("div",{style:{overflow:"hidden"},children:(0,t.jsx)("img",{src:Y.bgUrl,alt:"\u80CC\u666F\u56FE"})})}),(0,t.jsx)(T.Z.Item,{label:"\u62FC\u56FE",children:(0,t.jsx)("img",{src:Y.puzzleUrl,alt:"\u62FC\u56FE"})}),(0,t.jsx)(T.Z.Item,{label:"x \u8F74\u504F\u79FB",children:Y.x}),(0,t.jsx)(T.Z.Item,{label:"y \u8F74\u504F\u79FB",children:Y.y})]})}):se?(0,t.jsx)(b.Z,{type:"error",message:"Error",description:JSON.stringify(se),showIcon:!0}):(0,t.jsx)(Z.Z,{description:"\u8BF7\u4E0A\u4F20\u56FE\u7247"})})})}))]})})}var je=ye},40748:function(I,x,u){I.exports=u.p+"static/sunflower.2164946b.jpg"}}]);

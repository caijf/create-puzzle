"use strict";(self.webpackChunkcreate_puzzle=self.webpackChunkcreate_puzzle||[]).push([[433],{55830:function(O,v,u){u.r(v);var y=u(48305),a=u.n(y),g=u(75271),p=u(39508),o=u(40748),d=u(52676);function l(){var n=(0,g.useState)(),e=a()(n,2),i=e[0],r=e[1],h=function(){(0,p.createPuzzle)(o).then(function(Z){console.log(Z),r(Z)})};return(0,g.useEffect)(function(){h()},[]),(0,d.jsxs)("div",{children:[i&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:["\u80CC\u666F\u56FE\uFF1A",(0,d.jsx)("img",{src:i.bgUrl,alt:""})]}),(0,d.jsxs)("div",{children:["\u62FC\u56FE\uFF1A",(0,d.jsx)("img",{src:i.puzzleUrl,alt:""})]}),(0,d.jsxs)("div",{children:["x \u8F74\u504F\u79FB\u503C\uFF1A",i.x]}),(0,d.jsxs)("div",{children:["y \u8F74\u504F\u79FB\u503C\uFF1A",i.y]})]}),(0,d.jsx)("br",{}),(0,d.jsx)("button",{onClick:h,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210"})]})}v.default=l},27089:function(O,v,u){u.r(v);var y=u(75271),a=u(40748),g=u(24640),p=u(52676);function o(){var d=(0,y.useRef)(null),l=(0,y.useRef)(null);function n(){var e=d.current.getContext("2d"),i=new Image;i.src=a,i.crossOrigin="Anonymous",i.onload=function(){e&&(d.current.width=i.width,d.current.height=i.height,e.drawImage(i,0,0),e.strokeStyle="rgba(255, 255, 255, 0.7)",(0,g.drawPuzzle)(e,{x:40,y:40}),e.fillStyle="rgba(255, 255, 255, 0.7)",e.fill())}}return(0,y.useEffect)(function(){n()},[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("canvas",{ref:d,width:"0",height:"0"}),(0,p.jsx)("img",{src:"",alt:"",ref:l})]})}v.default=o},7660:function(O,v,u){u.r(v);var y=u(48305),a=u.n(y),g=u(75271),p=u(24640),o=u(52676);function d(){var l=(0,g.useRef)(null),n=(0,g.useRef)(null),e=(0,g.useState)(60),i=a()(e,2),r=i[0],h=i[1],z=(0,g.useState)(0),Z=a()(z,2),S=Z[0],C=Z[1],_=(0,g.useState)(),L=a()(_,2),R=L[0],N=L[1];function X(){if(n.current=l.current.getContext("2d"),n.current){var j=(120-r)/2;(0,p.drawPuzzle)(n.current,{x:j,y:j,w:r,h:r,margin:S,points:R})}}function U(){n.current&&(n.current.clearRect(0,0,120,120),X())}function I(j){var B=j.target.value,b=+B;b<30?h(30):b>120?h(120):h(Math.floor(b)||60)}function f(j){var B=j.target.value,b=+B;b<0?C(0):b>20?C(20):C(Math.floor(b)||0)}function P(j){var B=j.target.value;N(B?+B:void 0)}return(0,g.useEffect)(function(){X()},[]),(0,g.useEffect)(function(){U()},[r,S,R]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("canvas",{ref:l,width:"120",height:"120",style:{border:"1px solid red"}}),(0,o.jsxs)("div",{children:["\u62FC\u56FE\u5BBD\u9AD8\uFF1A",(0,o.jsx)("input",{type:"number",value:r,onInput:I,onChange:I})]}),(0,o.jsxs)("div",{children:["\u7559\u767D\uFF1A",(0,o.jsx)("input",{type:"number",value:S,onInput:f,onChange:f})]}),(0,o.jsxs)("div",{children:["\u968F\u673A\u62FC\u56FE\u70B9\uFF1A",(0,o.jsxs)("select",{onChange:P,value:R,children:[(0,o.jsx)("option",{value:"",children:"2/3/4"}),(0,o.jsx)("option",{value:2,children:"2"}),(0,o.jsx)("option",{value:3,children:"3"}),(0,o.jsx)("option",{value:4,children:"4"})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:U,children:"\u70B9\u51FB\u91CD\u65B0\u751F\u6210\u62FC\u56FE"})]})}v.default=d},98442:function(O,v,u){u.r(v);var y=u(75271),a=u(52676);function g(){var p=(0,y.useRef)(null),o=(0,y.useRef)(null);function d(){var l=p.current.getContext("2d"),n=o.current.getContext("2d"),e={x:40.5,y:40.5,w:40,h:40},i=7,r=Math.hypot(i,i);l&&(l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(e.x+e.w/2-r/2,e.y),l.arc(e.x+e.w/2,e.y-r/2,i,.75*Math.PI,.25*Math.PI),l.moveTo(e.x+e.w/2+r/2,e.y),l.lineTo(e.x+e.w,e.y),l.lineTo(e.x+e.w,e.y+e.h/2-r/2),l.arc(e.x+e.w+r/2,e.y+e.h/2,i,1.25*Math.PI,.75*Math.PI),l.moveTo(e.x+e.w,e.y+e.h/2+r/2),l.lineTo(e.x+e.w,e.y+e.h),l.lineTo(e.x+e.w/2+r/2,e.y+e.h),l.arc(e.x+e.w/2,e.y+e.h+r/2,i,1.75*Math.PI,1.25*Math.PI),l.moveTo(e.x+e.w/2-r/2,e.y+e.h),l.lineTo(e.x,e.y+e.h),l.lineTo(e.x,e.y+e.h/2+r/2),l.arc(e.x-r/2,e.y+e.h/2,i,.25*Math.PI,1.75*Math.PI),l.moveTo(e.x,e.y+e.h/2-r/2),l.lineTo(e.x,e.y),l.strokeStyle="red",l.stroke(),l.closePath()),n&&(n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(e.x+e.w/2-r/2,e.y),n.arc(e.x+e.w/2,e.y+r/2,i,1.25*Math.PI,1.75*Math.PI,!0),n.moveTo(e.x+e.w/2+r/2,e.y),n.lineTo(e.x+e.w,e.y),n.lineTo(e.x+e.w,e.y+e.h/2-r/2),n.arc(e.x+e.w-r/2,e.y+e.h/2,i,1.75*Math.PI,.25*Math.PI,!0),n.moveTo(e.x+e.w,e.y+e.h/2+r/2),n.lineTo(e.x+e.w,e.y+e.h),n.lineTo(e.x+e.w/2+r/2,e.y+e.h),n.arc(e.x+e.w/2,e.y+e.h-r/2,i,.25*Math.PI,.75*Math.PI,!0),n.moveTo(e.x+e.w/2-r/2,e.y+e.h),n.lineTo(e.x,e.y+e.h),n.lineTo(e.x,e.y+e.h/2+r/2),n.arc(e.x+r/2,e.y+e.h/2,i,.75*Math.PI,1.25*Math.PI,!0),n.moveTo(e.x,e.y+e.h/2-r/2),n.lineTo(e.x,e.y),n.strokeStyle="red",n.stroke(),n.closePath())}return(0,y.useEffect)(function(){d()},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("canvas",{ref:p,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}}),(0,a.jsx)("canvas",{ref:o,width:"120",height:"120",style:{border:"1px solid #d3d3d3"}})]})}v.default=g},61026:function(O,v,u){u.r(v),u.d(v,{default:function(){return be}});var y=u(26068),a=u.n(y),g=u(67825),p=u.n(g),o=u(48305),d=u.n(o),l=u(75271),n=u(53797),e=u(9537),i=u(67571),r=u(31217),h=u(11008),z=u(73925),Z=u(45e3),S=u(98251),C=u(85322),_=u(61295),L=u(35897),R=u(36155),N=u(43256),X=u(39508),U=u(53444),I=u(37462),f=u(93666),P=u(64172),j=u(43204),B=u(34206),b=u(6714),Fe=u(99455),ye=u(86356),T={itemUpload:"GTnjD86ZhgwXhMrg6F2f",itemWrapperFlexNone:"OTMBFPCllDQhiEWui5Rk",configWrapper:"uMibJp4WVYxudqEz9Ju2",result:"zgja6z0TycTYtpGRRRmY"},J=u(40748),t=u(52676),pe=["imgSourceType","imgSourceUrl","img","typeX","typeY","offsetX","offsetY","bgWidthType","bgHeightType","bgWidth","bgHeight","bgOffsetX","bgOffsetY","equalHeight","imageWidthType","imageHeightType","imageWidth","imageHeight","cacheImage"],A=function(c){return c[c.Upload=0]="Upload",c[c.Input=1]="Input",c}(A||{}),je=[{label:"\u4E0A\u4F20\u56FE\u7247",value:A.Upload},{label:"\u8FDC\u7A0B\u5730\u5740",value:A.Input}],s=function(c){return c[c.Custom=0]="Custom",c[c.Default=1]="Default",c}(s||{}),Q=[{label:"\u968F\u673A",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],k=[{label:"\u56FE\u7247\u5BBD\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],q=[{label:"\u56FE\u7247\u9AD8\u5EA6",value:s.Default},{label:"\u81EA\u5B9A\u4E49",value:s.Custom}],ee=[{label:"2/3/4",value:""},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],H=function(c){return c[c.Yes=0]="Yes",c[c.No=1]="No",c}(H||{}),Ee=[{label:"\u662F",value:H.Yes},{label:"\u5426",value:H.No}],te=[{label:"dataURL",value:"dataURL"},{label:"blob",value:"blob"}],F={sm:12,xs:24},ue={typeX:s.Default,typeY:s.Default,offsetX:0,offsetY:0,width:60,height:60,margin:2,points:ee[0].value,borderWidth:2,borderColor:"rgba(255,255,255,0.7)",fillColor:"rgba(255,255,255,0.7)",equalHeight:H.Yes,bgWidthType:s.Default,bgHeightType:s.Default,bgOffsetX:0,bgOffsetY:0,format:te[1].value,quality:.8,imageWidthType:s.Default,imageHeightType:s.Default,cacheImage:!0};function Ce(){var c=n.ZP.useForm(),Te=d()(c,1),E=Te[0],ae=(0,l.useRef)(),De=n.ZP.useWatch(["typeX"],E),Ze=n.ZP.useWatch(["typeY"],E),Pe=n.ZP.useWatch(["bgWidthType"],E),Be=n.ZP.useWatch(["bgHeightType"],E),Ae=n.ZP.useWatch(["imageWidthType"],E),We=n.ZP.useWatch(["imageHeightType"],E),ne=n.ZP.useWatch(["imgSourceType"],E),Ie=(0,l.useState)(),le=d()(Ie,2),Y=le[0],K=le[1],Me=(0,l.useState)(!1),re=d()(Me,2),Oe=re[0],ie=re[1],ze=(0,l.useState)(null),se=d()(ze,2),oe=se[0],de=se[1],W=(0,l.useRef)(1),V=(0,l.useCallback)(function(){var D,x,m=ae.current.getTransformFieldsValue(),he=m.imgSourceType,ce=m.imgSourceUrl,w=m.img,Se=m.typeX,Re=m.typeY,Ue=m.offsetX,He=m.offsetY,Ye=m.bgWidthType,Le=m.bgHeightType,Ne=m.bgWidth,Xe=m.bgHeight,Ke=m.bgOffsetX,Ve=m.bgOffsetY,we=m.equalHeight,_e=m.imageWidthType,$e=m.imageHeightType,fe=m.imageWidth,ge=m.imageHeight,Ge=m.cacheImage,Je=p()(m,pe);if(he===A.Upload){if(!Array.isArray(w)||!w[0]){K(void 0),U.ZP.error("\u8BF7\u4E0A\u4F20\u56FE\u7247");return}}else if(!ce){K(void 0),U.ZP.error("\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740");return}var $=W.current;ie(!0);var Qe=he===A.Upload?((D=w[0])===null||D===void 0?void 0:D.originFileObj)||((x=w[0])===null||x===void 0?void 0:x.url):ce,ke=Se===s.Default?void 0:Ue,qe=Re===s.Default?void 0:He,et=Ye===s.Default?void 0:Ne,tt=Le===s.Default?void 0:Xe,ut=[Ke,Ve],ve=_e===s.Default?void 0:fe,xe=$e===s.Default?void 0:ge,G=Ge,at=we===H.Yes;G&&(!ve&&typeof fe=="number"||!xe&&typeof ge=="number")&&(G=!1),(0,X.createPuzzle)(Qe,a()({x:ke,y:qe,bgWidth:et,bgHeight:tt,bgOffset:ut,imageWidth:ve,imageHeight:xe,equalHeight:at,cacheImage:G},Je)).then(function(M){$===W.current&&(de(null),K(M),console.log(M))}).catch(function(M){$===W.current&&(K(void 0),de((M==null?void 0:M.message)||M))}).finally(function(){$===W.current&&ie(!1)})},[]),me=(0,l.useCallback)((0,_.Z)(V,300),[V]);return(0,t.jsx)("div",{children:(0,t.jsxs)(I.Z,{gutter:[24,24],children:[(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsxs)(n.ZP,{form:E,submitter:!1,labelWidth:112,initialValues:a()({imgSourceType:A.Upload},ue),onValuesChange:function(){W.current+=1,me()},formExtraRef:ae,children:[(0,t.jsx)(e.Z,{label:"\u56FE\u7247\u6E90\u7C7B\u578B",name:"imgSourceType",options:je,hideLabel:!0,optionType:"button",radioGroupProps:{buttonStyle:"solid"}}),(0,t.jsx)(i.Z,{type:"avatar",name:"img",title:"\u70B9\u51FB\u4E0A\u4F20\u56FE\u7247",extra:(0,t.jsxs)("div",{children:["\u4E0A\u4F20\u540E\u518D\u70B9\u51FB\u56FE\u7247\u53EF\u4EE5\u91CD\u65B0\u4E0A\u4F20\uFF0C",(0,t.jsx)("a",{onClick:function(){var x,m=E.getFieldValue("img");(!(0,L.Z)(m)||((x=m[0])===null||x===void 0?void 0:x.url)!==J)&&(E.setFieldValue("img",[{uid:(0,R.Z)(),name:"sunflower.jpg",url:J}]),W.current+=1,me())},children:"\u70B9\u51FB\u4F7F\u7528\u793A\u4F8B\u56FE\u7247"}),"\u3002"]}),className:T.itemUpload,maxSize:50*1024*1024,hidden:ne!==A.Upload}),(0,t.jsx)(r.Z,{label:"\u56FE\u7247\u5730\u5740",name:"imgSourceUrl",placeholder:"\u8BF7\u8F93\u5165\u56FE\u7247\u5730\u5740",hideLabel:!0,disabledWhiteSpace:!0,allowClear:!0,textAreaProps:{size:"large",autoSize:{minRows:2,maxRows:6}},hidden:ne!==A.Input}),(0,t.jsxs)(P.Z,{title:"\u914D\u7F6E\u9879",size:"small",className:T.configWrapper,extra:(0,t.jsx)(j.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){E.setFieldsValue(ue),W.current+=1,V()},children:"\u91CD\u7F6E"}),children:[(0,t.jsxs)(P.Z,{title:"\u62FC\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"x \u8F74\u504F\u79FB",name:"typeX",options:Q,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetX",precision:0,min:0,style:{margin:0},hidden:De!==s.Custom})}),(0,t.jsx)(e.Z,{label:"y \u8F74\u504F\u79FB",name:"typeY",options:Q,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"offsetY",precision:0,min:0,style:{margin:0},hidden:Ze!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"\u5BBD\u5EA6",name:"width",precision:0,min:20})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"\u9AD8\u5EA6",name:"height",precision:0,min:20})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"\u7559\u767D",name:"margin",precision:0})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(z.Z,{label:"\u968F\u673A\u62FC\u56FE\u70B9",name:"points",options:ee})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"\u63CF\u8FB9\u5BBD\u5EA6",name:"borderWidth",precision:0})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(Z.Z,{label:"\u63CF\u8FB9\u989C\u8272",name:"borderColor",transform:function(x){return(0,N.Z)(x)?x.toCssString():x}})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(Z.Z,{label:"\u586B\u5145\u989C\u8272",name:"fillColor",transform:function(x){return(0,N.Z)(x)?x.toCssString():x}})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(e.Z,{label:"\u7B49\u9AD8",name:"equalHeight",optionType:"button",options:Ee,tooltip:"\u7B49\u9AD8\u65F6 y \u8F74\u59CB\u7EC8\u4E3A 0"})}))]})]}),(0,t.jsxs)(P.Z,{title:"\u80CC\u666F\u56FE",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"bgWidthType",options:k,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgWidth",precision:0,min:0,style:{margin:0},hidden:Pe!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"bgHeightType",options:q,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"bgHeight",precision:0,min:0,style:{margin:0},hidden:Be!==s.Custom})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"x \u8F74\u504F\u79FB",name:"bgOffsetX",precision:0})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"y \u8F74\u504F\u79FB",name:"bgOffsetY",precision:0})}))]})]}),(0,t.jsx)(P.Z,{title:"\u5BFC\u51FA\u56FE\u7247",size:"small",type:"inner",children:(0,t.jsxs)(I.Z,{children:[(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(z.Z,{label:"\u683C\u5F0F",name:"format",options:te})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(h.Z,{label:"\u8D28\u91CF",name:"quality",precision:2,step:.01,max:1,min:0})}))]})}),(0,t.jsxs)(P.Z,{title:"\u4E0A\u4F20\u7684\u56FE\u7247",size:"small",type:"inner",children:[(0,t.jsx)(e.Z,{label:"\u5BBD\u5EA6",name:"imageWidthType",options:k,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageWidth",precision:0,min:0,style:{margin:0},hidden:Ae!==s.Custom})}),(0,t.jsx)(e.Z,{label:"\u9AD8\u5EA6",name:"imageHeightType",options:q,className:T.itemWrapperFlexNone,contentAfter:(0,t.jsx)(h.Z,{name:"imageHeight",precision:0,min:0,style:{margin:0},hidden:We!==s.Custom})}),(0,t.jsx)(S.Z,{label:"\u7F13\u5B58",name:"cacheImage",tooltip:"\u7F13\u5B58\u6700\u8FD1\u52A0\u8F7D\u6210\u529F\u7684\u56FE\u7247\u3002\u6CE8\u610F\u56FE\u7247\u5BBD\u9AD8\u4E5F\u4F1A\u4E00\u5E76\u7F13\u5B58\u3002"})]})]})]})})),(0,t.jsx)(f.Z,a()(a()({},F),{},{children:(0,t.jsx)(B.Z,{children:(0,t.jsx)(P.Z,{title:"\u751F\u6210\u7ED3\u679C",size:"small",styles:{body:{maxHeight:"calc(100vh - 80px)",overflowY:"auto"}},className:T.result,extra:(0,t.jsx)(j.ZP,{type:"link",size:"small",style:{margin:"-1px 0"},onClick:function(){W.current+=1,V()},children:"\u91CD\u65B0\u751F\u6210"}),children:Y?(0,t.jsx)(b.Z,{spinning:Oe,delay:300,children:(0,t.jsxs)(C.Z,{column:1,styles:{label:{width:98,justifyContent:"flex-end"}},children:[(0,t.jsx)(C.Z.Item,{label:"\u80CC\u666F\u56FE",tooltip:"\u80CC\u666F\u56FE\u5C55\u793A\u6BD4\u4F8B\u53EF\u80FD\u6709\u7F29\u653E\uFF0C\u4E0D\u5F71\u54CD\u56FE\u7247\u5B9E\u9645\u5927\u5C0F",children:(0,t.jsx)("div",{style:{overflow:"hidden"},children:(0,t.jsx)("img",{src:Y.bgUrl,alt:"\u80CC\u666F\u56FE"})})}),(0,t.jsx)(C.Z.Item,{label:"\u62FC\u56FE",children:(0,t.jsx)("img",{src:Y.puzzleUrl,alt:"\u62FC\u56FE"})}),(0,t.jsx)(C.Z.Item,{label:"x \u8F74\u504F\u79FB",children:Y.x}),(0,t.jsx)(C.Z.Item,{label:"y \u8F74\u504F\u79FB",children:Y.y})]})}):oe?(0,t.jsx)(Fe.Z,{type:"error",message:"Error",description:JSON.stringify(oe),showIcon:!0}):(0,t.jsx)(ye.Z,{description:"\u8BF7\u4E0A\u4F20\u56FE\u7247"})})})}))]})})}var be=Ce},40748:function(O,v,u){O.exports=u.p+"static/sunflower.2164946b.jpg"}}]);
